<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">
<meta name="referrer" content="never">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="../../lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="../../lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="../../css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="../../images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="../../images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="../../images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="../../images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="../../atom.xml" title="乱码三千 – 分享实用IT技术" type="application/atom+xml">






<meta name="description" content="android程序员一枚,擅长java,kotlin,python,金融投资,欢迎交流~">
<meta name="keywords" content="android,java,kotlin,golang,go,python,自动化,量化,金融,php,docker,linux">
<meta property="og:type" content="website">
<meta property="og:title" content="乱码三千 – 分享实用IT技术">
<meta property="og:url" content="https://code.newban.cn/page/14/index.html">
<meta property="og:site_name" content="乱码三千 – 分享实用IT技术">
<meta property="og:description" content="android程序员一枚,擅长java,kotlin,python,金融投资,欢迎交流~">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="乱码三千 – 分享实用IT技术">
<meta name="twitter:description" content="android程序员一枚,擅长java,kotlin,python,金融投资,欢迎交流~">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>
<!--谷歌广告验证代码-->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-2626449904708114",
          enable_page_level_ads: true
     });
</script>
<!--谷歌广告验证代码-->

<!--短链广告-->
<!--<script type="text/javascript">
    var adfly_id = 25792435;
    var adfly_advert = 'banner';
    var popunder = false;
    var exclude_domains = ['code.newban.cn','newban.cn',  'localhost:4000'];
</script>
<script src="https://cdn.adf.ly/js/link-converter.js"></script>-->
<!--短链广告-->



  <link rel="canonical" href="https://code.newban.cn/page/14/">





  <title>乱码三千 – 分享实用IT技术</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
  
<a href="https://www.github.com/songjianzaina" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">乱码三千 – 分享实用IT技术</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">乱码三千 – 码出一个新世界</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="http://www.newban.cn/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="https://code.newban.cn/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../332.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../332.html" itemprop="url">关于Markdown图表绘制</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-07-03T09:04:19+08:00">
                2022-07-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>写作时难免会有图表绘制需求 比如下面几种</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><h5 id="第一种样式时序图"><a href="#第一种样式时序图" class="headerlink" title="第一种样式时序图"></a>第一种样式时序图</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Alice -&gt; Bob:Hello Bob, How are you?</span><br><span class="line">Note right of Bob: Bob thinks</span><br><span class="line">Bob -&gt; Alice: I am good thanks!</span><br></pre></td></tr></table></figure>

<h5 id="第二种样式时序图"><a href="#第二种样式时序图" class="headerlink" title="第二种样式时序图"></a>第二种样式时序图</h5><pre class="mermaid"> sequenceDiagram
    participant Alice
    participant Bob
    Alice->John: Hello John, how are you?
    loop Healthcheck
            John->John: Fight against hypochondria
    end
    Note right of John: Rational thoughts <br>prevail...
    John-->Alice: Great!
    John->Bob: How about you?
    Bob-->John: Jolly good!</pre>

<h5 id="甘特图"><a href="#甘特图" class="headerlink" title="甘特图"></a>甘特图</h5><pre class="mermaid">  gantt
    dateFormat  YYYY-MM-DD
    title Adding GANTT diagram functionality to mermaid
    section A section
    Completed task            :done,    des1, 2014-01-06,2014-01-08
    Active task               :active,  des2, 2014-01-09, 3d
    Future task               :         des3, after des2, 5d
    Future task2               :         des4, after des3,6d</pre>
<h5 id="上下流程图"><a href="#上下流程图" class="headerlink" title="上下流程图"></a>上下流程图</h5><pre class="mermaid">graph TD;
            A-->B;
            A-->C;
            B-->D;
            C-->D;</pre>

<h5 id="左右流程图"><a href="#左右流程图" class="headerlink" title="左右流程图"></a>左右流程图</h5><pre class="mermaid">graph LR;

律动乐器-->律动+氛围乐器-->律动+鼓组贝斯-->律动+鼓组贝斯+氛围乐器;
铺底+氛围-->铺底+氛围+律动-->铺底+氛围+律动+鼓组贝斯-->追加间奏乐器;</pre>

<h5 id="自定义style的流程图"><a href="#自定义style的流程图" class="headerlink" title="自定义style的流程图"></a>自定义style的流程图</h5><pre class="mermaid">graph LR;
    id1(Start)-->id2(Stop)
    style id1 fill:#f9f,stroke:#333,stroke-width:4px
    style id2 fill:#bbf,stroke:#f66,stroke-width:2px,color:#fff,stroke-dasharray: 5 5</pre>

<h5 id="各种形状的流程图"><a href="#各种形状的流程图" class="headerlink" title="各种形状的流程图"></a>各种形状的流程图</h5>
<pre class="mermaid">graph  TD;
    A[/Christmas\]--> B[\This is the text in the box\]-->
     C[\Go shopping/]-->D[/This is the text in the box/]-->E{{This is the text in the box}}-->F{This is the text in the box}-->G>This is the text in the box]-->H((This is the text in the circle))-->J(This is the text in the box)</pre>

<h3 id="语法实现"><a href="#语法实现" class="headerlink" title="语法实现"></a>语法实现</h3><p><strong>时序图demo代码：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    &lt;pre class=&quot;mermaid&quot;&gt;    sequenceDiagram</span><br><span class="line">    participant Alice</span><br><span class="line">    participant Bob</span><br><span class="line">    Alice-&gt;John: Hello John, how are you?</span><br><span class="line">    loop Healthcheck</span><br><span class="line">            John-&gt;John: Fight against hypochondria</span><br><span class="line">    end</span><br><span class="line">    Note right of John: Rational thoughts &lt;br/&gt;prevail...</span><br><span class="line">    John--&gt;Alice: Great!</span><br><span class="line">    John-&gt;Bob: How about you?</span><br><span class="line">    Bob--&gt;John: Jolly good!&lt;/pre&gt;</span><br><span class="line">**甘特图demo代码：**</span><br></pre></td></tr></table></figure>

<pre><code>&lt;pre class=&quot;mermaid&quot;&gt;    gantt
dateFormat  YYYY-MM-DD
title Adding GANTT diagram functionality to mermaid
section A section
Completed task            :done,    des1, 2014-01-06,2014-01-08
Active task               :active,  des2, 2014-01-09, 3d
Future task               :         des3, after des2, 5d
Future task2               :         des4, after des3, 5d
section Critical tasks
Completed task in the critical line :crit, done, 2014-01-06,24h
Implement parser and jison          :crit, done, after des1, 2d
Create tests for parser             :crit, active, 3d
Future task in critical line        :crit, 5d
Create tests for renderer           :2d
Add to mermaid                      :1d&lt;/pre&gt;</code></pre><p><strong>流程图demo代码：</strong></p>
<pre><code>    &lt;pre class=&quot;mermaid&quot;&gt;    graph TD;
            A--&gt;B;
            A--&gt;C;
            B--&gt;D;
            C--&gt;D;&lt;/pre&gt;

### 总结

以上只是列举其中几种 , 除此之外还可以绘制饼状图 状态图 类图 需求图等等

更多技巧可以参考`mermaid`文档: 《[mermaid官方文档](https://mermaid-js.github.io/mermaid/#/flowchart)》





**本文为作者原创转载时请注明出处 谢谢**

![](https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png)

*[乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站](https://code.newban.cn/)*

</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../327.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../327.html" itemprop="url">关于Git查看提交修改的文件列表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-06-28T09:04:19+08:00">
                2022-06-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="1-查看最后一次提交记录的修改文件信息"><a href="#1-查看最后一次提交记录的修改文件信息" class="headerlink" title="1.查看最后一次提交记录的修改文件信息"></a>1.查看最后一次提交记录的修改文件信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show --raw</span><br></pre></td></tr></table></figure>

<h4 id="2-查看指定commit-id对应修改文件列表"><a href="#2-查看指定commit-id对应修改文件列表" class="headerlink" title="2.查看指定commit id对应修改文件列表"></a>2.查看指定commit id对应修改文件列表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show --raw commit_id</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git show --raw 2f80f1c8bb2cb8e91d22ad38480b681c194f6518</span><br></pre></td></tr></table></figure>

<h4 id="3-查看所有提交记录的修改文件信息"><a href="#3-查看所有提交记录的修改文件信息" class="headerlink" title="3.查看所有提交记录的修改文件信息"></a>3.查看所有提交记录的修改文件信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --stat</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --name-only</span><br></pre></td></tr></table></figure>

<h4 id="4-查看所有修改相关的commit-ID和comment信息"><a href="#4-查看所有修改相关的commit-ID和comment信息" class="headerlink" title="4.查看所有修改相关的commit ID和comment信息"></a>4.查看所有修改相关的commit ID和comment信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --pretty=oneline</span><br></pre></td></tr></table></figure>

<h4 id="5-查询指定author的修改信息"><a href="#5-查询指定author的修改信息" class="headerlink" title="5.查询指定author的修改信息"></a>5.查询指定author的修改信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git log --author=jack.li</span><br></pre></td></tr></table></figure>

<h4 id="6-查看指定author在指定时间修改信息"><a href="#6-查看指定author在指定时间修改信息" class="headerlink" title="6.查看指定author在指定时间修改信息"></a>6.查看指定author在指定时间修改信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git log --pretty=&quot;%h - %s&quot; --author=&apos;Junio C Hamano&apos; --since=&quot;2008-10-01&quot; \</span><br><span class="line">   --before=&quot;2008-11-01&quot; --no-merges -- t/</span><br><span class="line">5610e3b - Fix testcase failure when extended attributes are in use</span><br><span class="line">acd3b9e - Enhance hold_lock_file_for_&#123;update,append&#125;() API</span><br><span class="line">f563754 - demonstrate breakage of detached checkout with symbolic link HEAD</span><br><span class="line">d1a43f2 - reset --hard/read-tree --reset -u: remove unmerged new paths</span><br><span class="line">51a94af - Fix &quot;checkout --track -b newbranch&quot; on detached HEAD</span><br><span class="line">b0ad11e - pull: allow &quot;git pull origin $something:$current_branch&quot; into an unborn branch</span><br></pre></td></tr></table></figure>

<p><strong>本文为作者原创转载时请注明出处 谢谢</strong></p>
<p><img src="https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png" alt></p>
<p><em><a href="https://code.newban.cn/">乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../331.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../331.html" itemprop="url">从found.000中恢复数据 某个文件夹突然不见了</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-06-03T09:04:19+08:00">
                2022-06-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><ul>
<li>本文是问题解决后编写的，解决顺序已经尽力按照我记得的编写。希望能给遇到此问题的朋友一份参考。</li>
<li>因涉及数据此等重要性的东西，建议还是看完全文再操作。在理解了我的解决思路之后，并且觉得我的方案有用方可尝试。切勿在你解决无望的时候，看到本文以为是发现新大陆，然后盲目操作导致数据丢失得不偿失！（因为我搜索过关于<code>found.000</code>的相关，有些人说用数据恢复软件，有些人说这个文件恢复不了，还有人提问该文件夹能不能删除诸如此类）</li>
<li>但是你还是想尝试，可以尝试复制一份<code>found.000</code>出来，在别的盘上或者电脑上对该文件夹进行操作。（切勿在源路径操作，方便你实在不行的情况下拿去维修）或者你对自己非常有信心，就在源路径下操作吧（因为我也不知道复制出来能不能恢复😂）。</li>
<li>本文更多的是提供思路，实际操作需要的一些诸如命令行操作，文件夹提权等需要大家自行百度。<h3 id="问题说明（此时我的电脑上是没有found-000这个文件的）"><a href="#问题说明（此时我的电脑上是没有found-000这个文件的）" class="headerlink" title="问题说明（此时我的电脑上是没有found.000这个文件的）"></a>问题说明（此时我的电脑上是没有found.000这个文件的）</h3>某天我的D盘下的“资料”文件夹突然不见了。<br>当时我的思路是：</li>
</ul>
<ol>
<li><p>该文件夹被病毒隐藏了？</p>
</li>
<li><p>我之前误删了？</p>
</li>
</ol>
<h4 id="初步解决方案"><a href="#初步解决方案" class="headerlink" title="初步解决方案"></a>初步解决方案</h4><p>通过问题排查（查看隐藏文件+受保护的文件），发现思路1是错误的。</p>
<p>那接下来就是怎么验证误删？因为该文件夹比较大，删除的情况下会提示放入不了回收站，要直接删除吗？所以回收站没有我的删除记录。然后思路2的解决方法是进PE使用数据恢复软件（如：Recuva，金山数据恢复）查看有没有相关痕迹，结果发现没有“资料“文件夹被删除的相关痕迹（着急解决问题，没想到截图）。（进不进PE没多大关系，但可能是因为我进PE恢复数据导致重启电脑的时候进行磁盘检查，然后我的电脑上才有<code>found.000</code>）</p>
<p>经过以上的方案，还是不行之后。我剩下的思路只有装杀软看看。但是，我没有装，因为接下来的操作我也是第一次遇到。</p>
<p>无意中，我使用 <code>everything</code> 软件进行搜索”资料”的时候，通过搜索结果看到我的文件还是存在的。忘记截图了，但我记得结果是xxx资料 <code>D:\资料\xxx</code>。当时我看到我的文件夹存在的时候很开心，马上右键打开所在路径，结果提示：请检查你的路径，没有该路径之类的话。（当时我一脸懵圈。<code>everything</code>可以搜索到，难道是<code>everything</code>之前的索引还存在？这个结果只是一个假象？）</p>
<ul>
<li><code>everything</code>的结果说明了什么？（我此时相信我的文件夹还是存在的）说明了我的文件夹还是存在的。没有被数据恢复软件没有检索到是因为我的文件夹根本没有被删除啊。但是不知道为什么就是看不到它了（注意，此时并不是隐藏，因为常规的查看隐藏文件方式已经不起作用了，我的理解是，因为某个原因，系统对”资料“这个文件夹的索引没有了）<h4 id="可行的解决方案"><a href="#可行的解决方案" class="headerlink" title="可行的解决方案"></a>可行的解决方案</h4></li>
<li><em>step1: 确保你的硬盘里有found.000*</em><br>因为我成功解决问题的基础是有这个文件。所以只需要在重启的时候进行磁盘检查，让系统重新找回对这个文件夹的索引。（如果你的电脑此时有这个文件跳过这一步）</li>
</ul>
<p><strong>step2: 存在 found.000后</strong><br>使用<code>everything</code> 搜索一下丢失文件夹的关键字。如下：可以看到我的资料都在这个文件夹下。</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE4OTc0MTE=,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述"></p>
<p><strong>step3: 进入文件夹</strong></p>
<p>于是我马上右键打开所在路径，我的天！进来了。我试了一下打开 <code>pdf</code> ，是可以打开的。我马上复制一份到别的盘打开，是可以打开的！于是我慢慢一步一步点上一级路径跳转，是可以访问的。可是当我点击<code>dir0001.chk</code>之后提示错误了。（具体提示的错误我忘记了）</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE4OTc0MTE=,size_16,color_FFFFFF,t_70-20220701114831592.png" alt="在这里插入图片描述"></p>
<p><strong>step4: 从文件浏览器进入found.000</strong></p>
<p>因为<code>step3</code>: 倒着进不了上一级路径。此时我想能不能正着进入该路径，于是我从文件夹点进去，提示权限不足，此时对文件夹提权就好了。</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE4OTc0MTE=,size_16,color_FFFFFF,t_70-20220701114845374.png" alt="在这里插入图片描述"></p>
<p>进入后，发现如下：（写下此文的时候我已经忘记相关弹窗提示，但是我记得我第一次提权进入该文件夹的时候没有这么多东西的，我是进行了<code>step5</code>才看到下图如此完整的文件夹）</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE4OTc0MTE=,size_16,color_FFFFFF,t_70-20220701114857321.png" alt="在这里插入图片描述"></p>
<p><strong>step5: 从bash进入dir0001.chk</strong></p>
<p>在<code>step4</code>我说明了我第一次进入<code>found.000</code>文件夹是没有什么东西的。于是我的思路是：无论如何都要进入<code>单片机</code>的上一级目录（我原本保存的路径就是<code>D:\资料\单片机</code>），所以虽然不能进入<code>found.000</code>，但是只要我进入”单片机“上一级目录就可以对我之前的数据全部复制保存。</p>
<ul>
<li><p>怎么操作？很简单，当时我想到的是从命令行看能不能进入，于是有下图：</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE4OTc0MTE=,size_16,color_FFFFFF,t_70-20220701114917729.png" alt="在这里插入图片描述"></p>
</li>
</ul>
<p>奇怪的是，我从命令行进入<code>单片机</code>的上一级目录之后，我就可以正着进<code>found.000</code>文件夹，并且还能看到比较多的文件夹了。才有了<code>step4</code>的第二张截图。然后也有了下面的截图。</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3UwMTE4OTc0MTE=,size_16,color_FFFFFF,t_70-20220701114927261.png" alt="在这里插入图片描述"></p>
<p>经过我的发现，之前的数据并不是全都在<code>dir0001.chk</code>中，在<code>found000</code>文件下的其他<code>dirxxxx.chk</code>都保存了我之前的资料。大家不放心每个文件夹都点开看看吧！</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ol>
<li>想办法让电脑中存在 <code>found.000</code>（通过重启后进行磁盘检查）</li>
<li>想办法进入<code>found.000</code>（通过命令行，必要时结合 <code>everything</code>）</li>
<li>事后我想，是不是一开始就可以通过 命令行 进入该文件夹了？即使不能正着进去，我也可以通过 everything 打开所在路径之后再通过命令行进入，然后通过<code>cp</code>命令直接复制到别的盘保存。</li>
<li>同时，我成功恢复数据感觉也是很多的机缘巧合，比如，如果我不进PE恢复数据，是不是就没有磁盘检查了，也就没有生成<code>found.000</code>，我可能就还不能解决此问题了！</li>
</ol>
<p><strong>本文转载自</strong>: <a href="https://blog.csdn.net/u011897411/article/details/106879852" target="_blank" rel="noopener">https://blog.csdn.net/u011897411/article/details/106879852</a></p>
<p><img src="https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png" alt> </p>
<p><em><a href="https://code.newban.cn/">乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../330.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../330.html" itemprop="url">记录关于移动硬盘文件丢失的找回过程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-06-01T09:04:19+08:00">
                2022-06-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h3><p>由于居家办公需要, 经常使用移动硬盘来回在公司和宿舍之间进行大文件拷贝, 某一天突然发现硬盘中的文件夹消失不见, 而空间占用依然存在</p>
<p>难道是文件被隐藏了?  检查一番之后发现不是</p>
<p>当时我就慌了 因为消失的都是重要文件, 于是赶紧百度</p>
<p><strong>搜索一阵之后, 我推测可能是不同系统兼容性错误导致的磁盘坏道</strong></p>
<p>因为公司的电脑是Mac系统 宿舍的电脑是Windows系统, 而我的硬盘格式是NTFS, Mac本身是不兼容该格式的, 加上我使用了<code>Omi NTFS</code>这个工具进行桥接中转 硬盘出现点问题 似乎是情理之中</p>
<p>既然发现了问题所在, 那就需要解决 尽可能地将文件恢复回来</p>
<p><strong>而我第一时间想到的便是进行磁盘修复, 当我在Windows平台中对硬盘进行修复之后, 丢失的文件夹确实出现了 但是却变成了一个未知文件 无法打开</strong></p>
<p>这就有点坑了</p>
<p>无奈之下我停止了对该硬盘进行文件写入操作, 免得操作频繁导致后期无法恢复</p>
<p>于是将该硬盘放置了一段时间, 直到有一天我需要从硬盘中未被破坏的文件夹里面找寻一些资料, 顺带使用了<code>everything</code>软件检索, 突然获得了意外惊喜, <code>everything</code>检索到了丢失文件夹中的资料</p>
<p>这意味着文件依然存在于移动硬盘中, 可能是被迁移到了某个隐藏文件中</p>
<p><strong>我利用<code>everything</code>找到了丢失文件所在目录, 名为<code>found.000</code></strong></p>
<p>这个<code>found.000</code>目录是隐藏目录, 即便开启显示隐藏文件夹功能也是看不到的, 而且这个目录需要管理员权限才能对里面的文件进行拷贝移动操作</p>
<p>既然目录找到了 那么恢复文件就不难了</p>
<h4 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h4><ol>
<li><p>打开管理员<code>cmd</code>窗口, 进入到<code>found.000</code>目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F:    //进入移动硬盘盘符</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd found.000   //打开隐藏文件</span><br></pre></td></tr></table></figure>
</li>
<li><p>列出当前目录下所有文件夹和文件(包含隐藏文件夹)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir /A *</span><br></pre></td></tr></table></figure>
</li>
<li><p>移动文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">move 需要移动的文件或文件夹名 目标文件夹名</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>被恢复的目录中可能会存在一些隐藏目录, 为了确保所有文件都恢复, 需要仔细检查</p>
<p>网上有位小伙伴也碰到了和我类似的问题, 大家有兴趣的可以参考一番:</p>
<p>《<a href="https://code.newban.cn/331.html">【问题记录】从found.000中恢复数据（某个文件夹突然不见了）</a>》</p>
<p><strong>本文为作者原创转载时请注明出处 谢谢</strong></p>
<p><img src="https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png" alt></p>
<p><em><a href="https://code.newban.cn/">乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../329.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../329.html" itemprop="url">Windows平台下cmd常用命令</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-05-29T09:04:19+08:00">
                2022-05-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="常用命令如下"><a href="#常用命令如下" class="headerlink" title="常用命令如下"></a>常用命令如下</h3><ol>
<li><p>进入某个盘符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">盘符名:</span><br></pre></td></tr></table></figure>
</li>
<li><p>打开文件夹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd 文件夹名</span><br></pre></td></tr></table></figure>
</li>
<li><p>回退到上一层目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ..</span><br></pre></td></tr></table></figure>
</li>
<li><p>进入根目录</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd\</span><br></pre></td></tr></table></figure>
</li>
<li><p>列出当前目录下所有文件夹(不含隐藏文件夹)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir</span><br></pre></td></tr></table></figure>
</li>
<li><p>列出当前目录下所有文件夹(包含隐藏文件夹)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir  /A:H</span><br></pre></td></tr></table></figure>
</li>
<li><p>列出当前目录下所有文件夹和文件(包含隐藏文件夹)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dir /A *</span><br></pre></td></tr></table></figure>
</li>
<li><p>移动文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">move 需要移动的文件或文件夹名 目标文件夹名</span><br></pre></td></tr></table></figure>
</li>
<li><p>拷贝当前目录下所有文件到D盘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">copy * &quot;d:\&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>更改文件属性 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">attrib 文件名 -H </span><br><span class="line">attrib 文件名 +H </span><br><span class="line">attrib 文件名 -A </span><br><span class="line">attrib 文件名 +A </span><br><span class="line">attrib 文件名 -R </span><br><span class="line">attrib 文件名 +R </span><br><span class="line">attrib 文件名 -S </span><br><span class="line">attrib 文件名 +S</span><br></pre></td></tr></table></figure>

<p><strong>注释:</strong></p>
<ul>
<li>H: 表示隐藏属性</li>
<li>A: 表示存档属性</li>
<li>R: 表示只读属性</li>
<li>S: 表示系统属性</li>
</ul>
<p>加号表示添加 减号表示移除</p>
</li>
</ol>
<p><strong>本文为作者原创转载时请注明出处 谢谢</strong></p>
<p><img src="https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png" alt></p>
<p><em><a href="https://code.newban.cn/">乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../328.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../328.html" itemprop="url">Window10如何设置只允许某个程序联网</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-05-28T09:04:19+08:00">
                2022-05-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h3><p>最近由于疫情原因不得不远程办公 宿舍有台笔记本 用于连接公司的电脑 由于平常在宿舍不怎么用电脑上网 所以没有装宽带 索性使用手机热点 </p>
<p>考虑到居家办公时长的不确定性 在使用热点上网之前 我打开了win10自带的流量计费功能 </p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505180406577.png" alt></p>
<p>这个功能可以限制系统后台程序偷跑流量 从而达到节省流量的目的 </p>
<p>毕竟 流量不便宜 </p>
<p>我已经做好了打持久战的准备</p>
<p>当我愉快的玩耍一会儿后 闲暇之余看了一下流量消耗 差点没让我喷血</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505180514353.png" alt></p>
<p>这虚幻居然给我偷跑流量 我明明没有启动这个应用啊 都不知道啥时候跑起来的 想想我远程软件也才用了几十兆流量而已  顿时气不打一处来</p>
<p>看来这个流量计费功能也不太好使呀 第三方应用它管不了 </p>
<p>于是我开始想 能不能只让我这个TeamView联网 而其他应用的禁止联网呢？  为了解决这个问题 我特地百度了一番 经过亲自尝试 最后得出了以下方案:</p>
<p><strong>使用防火墙功能 阻止所有应用程序联网 然后对需要联网的应用开白名单即可</strong></p>
<p>具体步骤如下:</p>
<h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><h4 id="第一步-开启防火墙功能"><a href="#第一步-开启防火墙功能" class="headerlink" title="第一步  开启防火墙功能"></a>第一步  开启防火墙功能</h4><p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505180829771.png" alt></p>
<p>这里 我将专用网络防火墙打开  并且将热点改成专用网络</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505181607206.png" alt></p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505181300659.png" alt></p>
<h4 id="第二步-阻止所有应用联网"><a href="#第二步-阻止所有应用联网" class="headerlink" title="第二步 阻止所有应用联网"></a>第二步 阻止所有应用联网</h4><p>我们进入防火墙高级设置页面:</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505181836588.png" alt></p>
<p>然后进入属性设置, 将专用配置文件选项下的出站连接改为阻止:</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505182029775.png" alt></p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505182122456.png" alt></p>
<p>这样就实现了阻止所有应用联网的目的 </p>
<h4 id="第三步-对需要联网的应用单独开启白名单"><a href="#第三步-对需要联网的应用单独开启白名单" class="headerlink" title="第三步 对需要联网的应用单独开启白名单"></a>第三步 对需要联网的应用单独开启白名单</h4><p>新建一个出站规则 选择相应的应用程序 并允许联网:</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505182502208.png" alt></p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505182533260.png" alt></p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505182614723.png" alt></p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505182709992.png" alt></p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505182818106.png" alt></p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220505182915890.png" alt></p>
<p>点击完成 </p>
<p>此时TeamView可以联网了  而其他的应用则不能联网  </p>
<p>接下来 可以放心大胆的连上热点了  不用担心流量偷跑的问题</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>是教训 也是经验  </p>
<p>当我写完这篇文章时 我的气也基本消了  因为我又收获了一个小经验  没有什么比这个更让我满足的了</p>
<p>希望这个经验能帮助到你</p>
<p><strong>本文为作者原创转载时请注明出处 谢谢</strong></p>
<p><img src="https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png" alt></p>
<p><em><a href="https://code.newban.cn/">乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../326.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../326.html" itemprop="url">说说移动设备的各种标识码（DeviceID, IMEI, UUID, UDID, OAID, IDFA, GAID</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-25T09:04:19+08:00">
                2022-04-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h3><ul>
<li><p><strong>Device ID</strong>：设备ID。</p>
</li>
<li><p><strong>IMEI</strong>：（International Mobile Equipment Identity）国际移动设备标识的缩写。是由15位数字组成的“电子串号”，它与每台手机一一对应，每个IMEI在世界上都是唯一的。</p>
</li>
<li><p><strong>MEID</strong>：(Mobile Equipment Identifier) 移动设备识别码是CDMA手机的身份识别码，也是每台CDMA手机或通讯平板唯一的识别码。</p>
</li>
<li><p><strong>IDFA</strong>：（Identifier For Advertising）iOS独有的广告标识符。</p>
</li>
<li><p><strong>UDID</strong>：（Unique Device Identifier）唯一设备标识码。</p>
</li>
<li><p><strong>UUID</strong>：（Universally Unique Identifier）通用唯一识别码。目前最广泛应用的UUID，是微软公司的全局唯一标识符GUID。其目的是让分布式系统中的所有元素，都能有唯一的辨识信息，而不需要通过中央控制端来做辨识信息的指定。</p>
</li>
<li><p><strong>OAID</strong>：(Open Anonymous Device Identifier) 开放匿名设备标识符。</p>
</li>
<li><p><strong>GAID</strong>：Google Advertising ID。</p>
</li>
</ul>
<h3 id="详细介绍"><a href="#详细介绍" class="headerlink" title="详细介绍"></a>详细介绍</h3><p><strong>（1）Device ID</strong></p>
<p>设备ID，具有唯一性。其中又包括IMEI 和 MEID/ESN。一般情况我们获取手机的DeviceId也就是手机的IMEI码。</p>
<p><strong>（2）IMEI</strong></p>
<p>GSM设备返回的，并且是写在主板上的，重装APP不会改变IMEI。</p>
<p>Android：Android 6.0以上系统需要用户授予read_phone_state权限（弹窗授权），如果用户拒绝就无法获得。但是Andorid Q（10.0）版本，将无法获取IMEI，出于用户隐私等一系列安全问题的考虑。将用其他匿名标识符代替，比如OAID。</p>
<p>IOS：iOS 5 之后被禁止。</p>
<p>IMEI是联通、移动手机的标识，MEID是电信手机的标识。</p>
<p>IMEI可以在在移动设备上查询到，一般来说一个双卡手机不止一个IMEI值，全网通双卡手机有两个IMEI和一个MEID。</p>
<p><strong>（3）MEID</strong></p>
<p>在手机键盘直接键入*#06#可获得。</p>
<p>MEID/ESN：CDMA设备返回的，一般不使用。</p>
<p><strong>（4）mac地址</strong></p>
<p>硬件标识符，包括WiFi mac地址和蓝牙mac地址。</p>
<p>Android：Android 6.0之后被禁止，若获取则会被判定为有害应用。</p>
<p>IOS：iOS 7 之后被禁止（同时禁止的还有OpenUDID）。</p>
<p><strong>（5）UDID</strong></p>
<p>用来标示设备的唯一性，由40个字符的字母和数字组成 。</p>
<p>Android：获取UUID后，写入.so文件生成UDID。即使APP重装，值也不变，除非root手机（普通用户做不到）。</p>
<p>IOS：iOS 6 之后被禁止获取系统原生的UDID，但可以通过uuid，写入到钥匙串中，从而获得自定义的UDID（非系统原生），即使用户重装APP，只要每次都取这个钥匙串返回，就是不变的。</p>
<p>OpenUDID：是一个替代 UDID 的第三发解决方案。缺点是如果你完全删除全部带有 OpenUDID SDK 包的 App（比如恢复系统等），那么 OpenUDID 会重新生成，而且和之前的值会不同，相当于新设备。</p>
<p><strong>（6）UUID</strong></p>
<p>APP重装后会改变。</p>
<p><strong>（7）IDFA</strong></p>
<p>IDFA 是苹果 iOS 6 开始新增的广告标识符，用于给开发者跟踪广告效果用的，可以简单理解为 iPhone 的设备临时身份证，说是临时身份证是因为它允许用户更换，IDFA 存储在用户 iOS 系统上，同一设备上的应用获取到的 IDFA 是相同的。iOS 用户可以通过（设置程序 -&gt; 通用 -&gt; 还原 -&gt; 还原位置与隐私）更换 IDFA，iOS 10 系统开始提供禁止广告跟踪功能，用户勾选这个功能后，应用程序将无法读取到设备的 IDFA。（在统计唯一用户的时候，IDFA 的可变性会造成部分用户的重复统计。）</p>
<p>适用于对外：例如广告推广，换量等跨应用的用户追踪等。</p>
<p>总结：iOS 6 时面世，可以监控广告效果，同时保证用户设备不被APP追踪的折中方案。可能发生变化，如系统重置、在设置里还原广告标识符。用户可以在设置里打开“限制广告跟踪”。</p>
<p><strong>（8）OAID</strong></p>
<p>APP类广告效果追踪需要使用到用户的设备标识进行广告点击和转化效果的匹配，而安卓系统当前强依赖于IMEI的获取，上面提到Andorid Q（10.0）版本后，将无法获取IMEI。基于此背景，进行广告投放的效果追踪，需要能够替代及补充IMEI的设备标识。</p>
<p>目前OAID作为目前市场主流的归因补充标识，OAID是由中国信息通讯研究院号召，移动安全联盟推行的安卓设备标识，在无法获取设备号情况下可以使用该标识进行数据匹配，目前主流厂商均已在新版本系统中支持该标识的获取，具有权威性。OAID可以理解为是国内联合推出的广告标识。</p>
<p>与IDFA类似，对于OAID 用户也可以手动在设置中通过重置广告标识符更换OAID或者“限制广告跟踪”。</p>
<p>与OAID相关的设备标识体系中拥有四种设备标识：</p>
<p><strong>（9）GAID</strong></p>
<p>Google推出的广告标识，与IDFA类似。在装了google play service的安卓手机上，才可以获取到GAID。</p>
<p>广告id是用户特殊的，独特的，可重置的广告id，由Google Play Service 提供，它为用户更好的控制，为开发人员提供简单、标准的系统继续使用你的应用程序，它用于广告目的的匿名标示符和或者重置其标示符或者退出以利益为基础的Google Play的应用程序。</p>
<p>主要用于广告定向，并且和IDFA一样 对于GAID 用户也可以自己设置禁止广告跟踪。</p>
<p>整理，借鉴了多个地方的资料，有不准确的欢迎指出！</p>
<h2 id="用户唯一标识"><a href="#用户唯一标识" class="headerlink" title="用户唯一标识"></a>用户唯一标识</h2><h3 id="为什么要建设用户唯一标识"><a href="#为什么要建设用户唯一标识" class="headerlink" title="为什么要建设用户唯一标识"></a>为什么要建设用户唯一标识</h3><p>如何区分某个用户就是他这个用户，而不是另一个用户，在数据埋点中，是一个非常重要的事情。因为如果做不到用户的唯一识别，那凡是涉及到用户的数据都将是错的（比如用户量、新增用户数、活跃用户数等等）。所以建设用户唯一标识，尤为重要。</p>
<h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><p>设计埋点字段的时候，有两个字段是一定要包括的，即<strong>设备ID和用户ID</strong>。这两个字段应该纳入通用字段，每个埋点的事件都必须要集成收集。</p>
<p><strong>（1）设备ID</strong></p>
<p>使用相应的算法，生成一个设备ID，以唯一识别用户的终端设备。不同终端的设备ID，其生成算法规则不一样，以下列举不同终端的设备ID的生成规则：</p>
<p><strong>AndroidApp</strong></p>
<p>安卓系统历经多次升级，对权限控制越来越严格，唯一识别手机的方法也在发生变化。下面整理一下安卓系统适合做设备唯一标识符的几个标识符，以及其特性：</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/v2-bdfd76a24b27bacfa59a775788289cb8_1440w.jpg" alt="img"></p>
<p>从表格中看出，IMEI是最适合做设备唯一标识的，奈何获取IMEI需要授予权限且Android 10以后不再开放IMEI的权限。综合起来，安卓系统中，应该按照<strong>IMEI -&gt;OAID -&gt; ANDROID_ID</strong>的顺序生成设备ID。即先获取IMEI号，获取不到IMEI时获取OAID，获取不到OAID时，再获取ANDROID_ID，然后使用相关算法生成设备ID。</p>
<p><strong>IOS App</strong></p>
<p>苹果系统，可用于识别唯一设备的标识不多，如下图。综合起来，苹果系统生成设备ID的标识符顺序应该是<strong>IDFA -&gt; IDFV -&gt;UDID</strong>，即先获取IDFA，获取不到在获取IDFV，获取不到IDFV时，再获取UDID，然后使用相关算法生成一个设备ID。</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/v2-c40480adcc3be9c92803c2be424f3216_1440w.jpg" alt="img"></p>
<p><strong>Web网站</strong></p>
<p>Web网站，使用cookie_id作为设备ID，并存储在浏览器的cookie中。</p>
<p><strong>微信小程序</strong></p>
<p>通常做法使用openid作为设备ID，当然也可以自己生产一个ID，作为设备ID。如果用过openid作为设备ID，需要注意微信小程序的冷启动问题（<strong>获取 openid 是一个异步的操作，所以会导致数据上报的时候，可能还没获取到openid，这就是导致设备ID为空</strong>）。</p>
<p><strong>2）用户ID</strong></p>
<p>用户ID，即用户在业务产品注册的用户账号。</p>
<p>收集到设备ID和用户ID后，就要想办法将设备ID和用户ID关联起来，也即用户唯一标识建模，详见下文。</p>
<h2 id="用户唯一标识建设"><a href="#用户唯一标识建设" class="headerlink" title="用户唯一标识建设"></a>用户唯一标识建设</h2><p>设计一个字段，比如就叫<strong>distinct_id</strong>（设备ID命名为device_id，用户ID命名为user_id）这个字段用于识别唯一用户。凡是统计用户相关的数据时，都以<strong>distinct_id</strong>作为用户的唯一区别标识。下面，以具体案例进行阐述。</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/v2-d563301707deda4e26447ead14f2ffe8_1440w.jpg" alt="img"></p>
<p><strong>步骤说明：</strong></p>
<ol>
<li>小明在一部手机上启动了app。该手机的device_id为x1，此时生成一个dsitinct_id为d1；</li>
<li>小明在这个手机上用账号u1进行登录。此时device_id为x1，user_id为u1，dsitinct_id为d1；</li>
<li>小明继续在这手机上使用app。此时device_id为x1，user_id为u1，dsitinct_id为d1；</li>
<li>小明退出自己的账号，继续使用app。此时仍然device_id为x1，user_id为u1，dsitinct_id为d1；</li>
<li>小明把手机给了小花，小花用自己的账号u2登录app。此时u2去关联x1，因为x1已经与u1关联，故关联失败。所以重新生成一个distinct_id为d2来标识此用户（u2）；</li>
<li>小花继续使用app。此时device_id为x1，user_id为u2，dsitinct_id为d2；</li>
<li>小明换了部新手机，使用app。此时device_id为一个新的x2，后台生成一个新的dsitinct_id为d3；</li>
<li>小明在新手机上，使用账号u1登录了app。此时u1去关联x2，因为x2之前没有与账号关联过，所以关联成功，但是u1已经有一个dsitinct_id为d1，所以此时的dsitinct_id仍然为d1；</li>
<li>小明继续在新手机上使用app。此时device_id为x2，user_id为u1，dsitinct_id为d1。</li>
</ol>
<p><strong>此时三个字段的映射关系为：</strong></p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/v2-3be07ad5528d0c9da5b5660ae163bc64_1440w.jpg" alt="img"></p>
<p><strong>（1）后续修复</strong></p>
<p><strong>事件字段修复</strong></p>
<p>小明换新手机后，在登录前，系统给分配的dsitinct_id为d3，不符合实际情况，故要将在新手机上登录前的dsitinct_id修复为d1。如下：</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/v2-144aa57bb74452d0e5f619bb9722c364_1440w.jpg" alt="img"></p>
<p><strong>映射表修复</strong></p>
<p>1）删除d3与x2的映射关系</p>
<p>2）将x2添加到d1的device_id_list字段</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/v2-17b54bc2d25400c36551bea6b695d04c_1440w.jpg" alt="img"></p>
<p><strong>本文转载自:</strong> <a href="https://zhuanlan.zhihu.com/p/395387972" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/395387972</a> </p>
<p><img src="https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png" alt></p>
<p><em><a href="https://code.newban.cn/">乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../325.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../325.html" itemprop="url">PC端快速下载视频网站的视频</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-20T09:04:19+08:00">
                2022-04-20
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>有时候在逛B站或者看QQ音乐MV的时候 有把视频下载到本地的需求</p>
<p>网上有很多针对特定网站视频的解析工具, 比如针对B站的有:</p>
<ul>
<li><p><a href="https://bilibili.iiilab.com/" target="_blank" rel="noopener">B站视频在线解析</a> </p>
</li>
<li><p><a href="https://github.com/FlySelfLog/downkyi/releases" target="_blank" rel="noopener">Downkyi下载姬</a></p>
</li>
<li><p><a href="http://client.jijidown.com/" target="_blank" rel="noopener">唧唧下载器</a></p>
</li>
</ul>
<p>对于我这种只是偶尔下载个视频的懒人而言, 为了下载一个视频单独安装一个软件, 实在是不太能接受  自然是优先选择在线解析的方案</p>
<p>但是 大部分在线解析网站都是针对某一个或者某几个主流的视频网站进行解析处理, 如果碰上冷门网站 那就有些尴尬了</p>
<p>今天给大家介绍一个非常简单实用, 并且对所有视频网站都通用的一个方法, 只需要一个浏览器就能快速获取视频源地址</p>
<h3 id="原料准备"><a href="#原料准备" class="headerlink" title="原料准备"></a>原料准备</h3><ul>
<li>浏览器 (本文以谷歌浏览器为例)</li>
<li>电脑 </li>
</ul>
<h3 id="开始抓取"><a href="#开始抓取" class="headerlink" title="开始抓取"></a>开始抓取</h3><ol>
<li><p>第一步打开浏览器 将视频地址填入地址栏</p>
</li>
<li><p>按F12进入开发者选项 选择移动设备浏览模式 对Media进行过滤 然后F5刷新页面</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220424112429767.png" alt="image-20220424112429767"></p>
</li>
<li><p>拷贝视频文件路径 直接浏览器下载或者第三方软件下载</p>
<p><img src="https://gitee.com/songjianzaina/lunanzb_img/raw/master/img/image-20220424112609595.png" alt="image-20220424112609595"></p>
</li>
</ol>
<p>博主对B站和QQ音乐进行了测试, 均能获取到原视频地址, 如果没有出现地址, 建议多刷新几次试试, 一般都没有问题</p>
<p>很多在线视频解析的原理也就是这么一回事 </p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>上面这种方法 相信有很多人都知道, 但如果你不是做技术的, 可能就不太清楚了, 希望本文能帮到大家</p>
<p>另外 如果你有批量下载视频的需求, 该方法就有些费劲了, 这种情况建议大家使用软件进行解析下载</p>
<p><strong>本文为作者原创转载时请注明出处 谢谢</strong></p>
<p><img src="https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png" alt></p>
<p><em><a href="https://code.newban.cn/">乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../324.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../324.html" itemprop="url">Android腾讯IM快速集成流程和注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-04-01T09:04:19+08:00">
                2022-04-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>最近项目集成了及时通信业务, 采用的是腾讯IM</p>
<p>首先是SDK的快速集成, 步骤如下:</p>
<h3 id="第一步-安装依赖包"><a href="#第一步-安装依赖包" class="headerlink" title="第一步  安装依赖包"></a>第一步  安装依赖包</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">implementation <span class="string">'com.tencent.imsdk:imsdk-plus:5.6.1200'</span></span><br></pre></td></tr></table></figure>

<h3 id="第二步-初始化SDK-需要用到appid"><a href="#第二步-初始化SDK-需要用到appid" class="headerlink" title="第二步 初始化SDK (需要用到appid)"></a>第二步 初始化SDK (需要用到appid)</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getInstance()</span><br><span class="line">            .initSDK(<span class="keyword">this</span>, <span class="string">"这里填写appid"</span>, V2TIMSDKConfig().apply &#123;</span><br><span class="line">                logLevel = V2TIMSDKConfig.V2TIM_LOG_INFO</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125;, <span class="keyword">object</span> : V2TIMSDKListener() &#123;</span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onConnecting</span><span class="params">()</span></span> &#123;</span><br><span class="line">                    Log.i(<span class="string">"KIM"</span>, <span class="string">"正在连接到腾讯云服务器"</span>)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onConnectSuccess</span><span class="params">()</span></span> &#123;</span><br><span class="line">                    Log.i(<span class="string">"KIM"</span>, <span class="string">"已经成功连接到腾讯云服务器"</span>)</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onConnectFailed</span><span class="params">(code: <span class="type">Int</span>, error: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">                    Log.i(<span class="string">"KIM"</span>, <span class="string">"连接腾讯云服务器失败 <span class="variable">$code</span>  <span class="variable">$error</span>"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="第三步-登录IM"><a href="#第三步-登录IM" class="headerlink" title="第三步 登录IM"></a>第三步 登录IM</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getInstance().login(</span><br><span class="line">                <span class="string">"这里填当前用户id"</span>,</span><br><span class="line">                <span class="string">"这里填登录密钥 从后台获取"</span>,<span class="keyword">object</span> : V2TIMCallback &#123;</span><br><span class="line">                    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSuccess</span><span class="params">()</span></span> &#123;</span><br><span class="line">                        Log.i(TAG, <span class="string">"登录成功"</span>)</span><br><span class="line">             </span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onError</span><span class="params">(code: <span class="type">Int</span>, desc: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">                        Log.i(TAG, <span class="string">"登录失败 <span class="variable">$code</span> <span class="variable">$desc</span>"</span>)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="第四步-加入群聊房间-如果是单聊可以跳过该步骤"><a href="#第四步-加入群聊房间-如果是单聊可以跳过该步骤" class="headerlink" title="第四步 加入群聊房间 (如果是单聊可以跳过该步骤)"></a>第四步 加入群聊房间 (如果是单聊可以跳过该步骤)</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getInstance().joinGroup(<span class="string">"这里填房间号 从后台获取"</span>, <span class="string">""</span>, <span class="keyword">object</span> : V2TIMCallback &#123;</span><br><span class="line">            <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSuccess</span><span class="params">()</span></span> &#123;</span><br><span class="line">                Log.i(TAG, <span class="string">"加入群组成功"</span>)</span><br><span class="line">                </span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onError</span><span class="params">(code: <span class="type">Int</span>, desc: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">                Log.i(TAG, <span class="string">"加入群组失败 <span class="variable">$code</span> <span class="variable">$desc</span>"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="第五步-接收消息"><a href="#第五步-接收消息" class="headerlink" title="第五步 接收消息"></a>第五步 接收消息</h3><p><strong>如果业务不涉及音视频传输:</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getInstance().addSimpleMsgListener(<span class="keyword">object</span> :</span><br><span class="line">        V2TIMSimpleMsgListener() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 对应 sendGroupCustomMessage</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onRecvGroupCustomMessage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            msgID: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">            groupID: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">            sender: <span class="type">V2TIMGroupMemberInfo</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">            customData: <span class="type">ByteArray</span>?</span></span></span><br><span class="line"><span class="function"><span class="params">        )</span></span> &#123;</span><br><span class="line">            <span class="keyword">super</span>.onRecvGroupCustomMessage(msgID, groupID, sender, customData)</span><br><span class="line">   		Log.i(TAG, <span class="string">"接收群聊自定义消息"</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 对应 sendGroupTextMessage</span></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onRecvGroupTextMessage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            msgID: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">            groupID: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">            sender: <span class="type">V2TIMGroupMemberInfo</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">            body: <span class="type">String</span>?</span></span></span><br><span class="line"><span class="function"><span class="params">        )</span></span> &#123;</span><br><span class="line"></span><br><span class="line">            Log.i(TAG, <span class="string">"接收群聊文本消息 <span class="variable">$body</span>"</span>)</span><br><span class="line">       </span><br><span class="line">        &#125;</span><br><span class="line">          <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onRecvC2CTextMessage</span><span class="params">(msgID: <span class="type">String</span>?, sender: <span class="type">V2TIMUserInfo</span>?, text: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">            <span class="keyword">super</span>.onRecvC2CTextMessage(msgID, sender, text)</span><br><span class="line">         Log.i(TAG, <span class="string">"接收单聊文本消息 <span class="variable">$text</span>"</span>)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onRecvC2CCustomMessage</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            msgID: <span class="type">String</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">            sender: <span class="type">V2TIMUserInfo</span>?,</span></span></span><br><span class="line"><span class="function"><span class="params">            customData: <span class="type">ByteArray</span>?</span></span></span><br><span class="line"><span class="function"><span class="params">        )</span></span> &#123;</span><br><span class="line">            <span class="keyword">super</span>.onRecvC2CCustomMessage(msgID, sender, customData)</span><br><span class="line">           Log.i(TAG, <span class="string">"接收单聊自定义消息 "</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">          </span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<p><strong>如果业务涉及音视频传输:</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getMessageManager().addAdvancedMsgListener( <span class="keyword">object</span> : V2TIMAdvancedMsgListener() &#123;</span><br><span class="line">        <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onRecvNewMessage</span><span class="params">(msg: <span class="type">V2TIMMessage</span>?)</span></span> &#123;</span><br><span class="line">            Log.i(TAG, <span class="string">"收到消息类型<span class="subst">$&#123;msg?.elemType&#125;</span> "</span>)</span><br><span class="line"> </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="第六步-发送消息"><a href="#第六步-发送消息" class="headerlink" title="第六步 发送消息"></a>第六步 发送消息</h3><p><strong>如果业务不涉及音视频传输:</strong></p>
<ol>
<li><p>单聊 (分为文本消息和自定义消息)</p>
<ul>
<li><p>文本消息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getInstance().sendC2CTextMessage(<span class="string">"这里填需要发送的文本"</span>,</span><br><span class="line">            <span class="string">"这里填对方的登录id"</span>,</span><br><span class="line">            V2TIM_PRIORITY_HIGH,</span><br><span class="line">            <span class="keyword">object</span> : V2TIMValueCallback&lt;V2TIMMessage&gt; &#123;</span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSuccess</span><span class="params">(t: <span class="type">V2TIMMessage</span>?)</span></span> &#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">"发送单聊文本消息成功"</span>)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onError</span><span class="params">(code: <span class="type">Int</span>, desc: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">"发送单聊文本消息失败 <span class="variable">$code</span> <span class="variable">$desc</span>"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义消息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getInstance().sendC2CCustomMessage(<span class="string">"这里填需要发送的自定义消息 格式为字节数组"</span>,</span><br><span class="line">            <span class="string">"这里填对方的登录id"</span>,</span><br><span class="line">            V2TIM_PRIORITY_HIGH,</span><br><span class="line">            <span class="keyword">object</span> : V2TIMValueCallback&lt;V2TIMMessage&gt; &#123;</span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSuccess</span><span class="params">(t: <span class="type">V2TIMMessage</span>?)</span></span> &#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">"发送单聊自定义消息成功"</span>)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onError</span><span class="params">(code: <span class="type">Int</span>, desc: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">"发送单聊自定义消息失败 <span class="variable">$code</span> <span class="variable">$desc</span>"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure>





</li>
</ul>
</li>
</ol>
<ol start="2">
<li><p>群聊 (分为文本消息和自定义消息)</p>
<ul>
<li><p>文本消息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getInstance().sendGroupTextMessage(<span class="string">"这里填需要发送的文本"</span>,</span><br><span class="line">            <span class="string">"这里填群聊房间id"</span>,</span><br><span class="line">            V2TIM_PRIORITY_HIGH,</span><br><span class="line">            <span class="keyword">object</span> : V2TIMValueCallback&lt;V2TIMMessage&gt; &#123;</span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSuccess</span><span class="params">(t: <span class="type">V2TIMMessage</span>?)</span></span> &#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">"发送群文本消息成功"</span>)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onError</span><span class="params">(code: <span class="type">Int</span>, desc: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">"发送群文本消息失败 <span class="variable">$code</span> <span class="variable">$desc</span>"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ol>
<ul>
<li><p>自定义消息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getInstance().sendGroupCustomMessage(<span class="string">"这里填需要发送的自定义消息 格式为字节数组"</span>,</span><br><span class="line">            <span class="string">"这里填群聊房间id"</span>,</span><br><span class="line">            V2TIM_PRIORITY_HIGH,</span><br><span class="line">            <span class="keyword">object</span> : V2TIMValueCallback&lt;V2TIMMessage&gt; &#123;</span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onSuccess</span><span class="params">(t: <span class="type">V2TIMMessage</span>?)</span></span> &#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">"发送群自定义消息成功"</span>)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onError</span><span class="params">(code: <span class="type">Int</span>, desc: <span class="type">String</span>?)</span></span> &#123;</span><br><span class="line">                    Log.i(TAG, <span class="string">"发送群自定义消息失败 <span class="variable">$code</span> <span class="variable">$desc</span>"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br></pre></td></tr></table></figure>




</li>
</ul>
<p><strong>如果业务涉及音视频传输:</strong></p>
<p>该方法支持音视频图片 文本和自定义消息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">V2TIMManager.getMessageManager().sendMessage()</span><br></pre></td></tr></table></figure>

<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>这里的坑主要在于消息的收发, 官方给的API比较多, 单聊和群聊串在一块, 看文档有时容易懵, 这里对收发消息的使用做了一个总结, 如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">* IM群聊和单聊的消息收发走的是同一套  总共分为两种需求:</span><br><span class="line">* 第一种: 不涉及音视频 只涉及字符串传输 那么监听消息使用addSimpleMsgListener 发消息使用sendC2C(Group)TextMessage和sendC2C(Group)CustomMessage</span><br><span class="line">* 第二种: 涉及音视频等复杂消息传递 那么监听消息使用addAdvancedMsgListener 发消息使用V2TIMManager.getMessageManager().sendMessage()</span><br><span class="line">*</span><br><span class="line">* 注意: setGroupListener不是监听的群聊消息 而是对群组相关的事件监听 比如群创建通知 公告等等</span><br></pre></td></tr></table></figure>

<h3 id="附加"><a href="#附加" class="headerlink" title="附加"></a>附加</h3><p><a href="https://cloud.tencent.com/document/product/269/44498" target="_blank" rel="noopener">腾讯IM集成文档</a></p>
<p><strong>本文为作者原创转载时请注明出处 谢谢</strong></p>
<p><img src="https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png" alt></p>
<p><em><a href="https://code.newban.cn/">乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://code.newban.cn../../323.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="乱码三千">
      <meta itemprop="description" content>
      <meta itemprop="image" content="../../images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="乱码三千 – 分享实用IT技术">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="../../323.html" itemprop="url">Android集成支付宝支付以及沙箱环境测试注意事项</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2022-03-01T09:04:19+08:00">
                2022-03-01
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>现在很多App都涉及到支付, 毕竟开发APP目的是为了盈利嘛, 通常我们会在App中同时集成支付宝和微信支付, 方便用户消费</p>
<h3 id="集成相关"><a href="#集成相关" class="headerlink" title="集成相关"></a>集成相关</h3><p>支付宝的集成相对简单, 前端无需添加<code>APPID</code>和密钥, 签名部分在在后端完成,只要确保应用签名和开发平台填入的保持一致就行,  不像微信不仅要配置<code>APPID</code>, 还要添加<code>WXEntryActivity</code> ,此外包名也必须匹配 少一个都不行</p>
<p>当然两者都需要在开发平台填入一个应用签名, 格式为<code>MD5</code></p>
<h3 id="沙箱环境"><a href="#沙箱环境" class="headerlink" title="沙箱环境"></a>沙箱环境</h3><p>当我们<code>SDK</code>集成完毕, 后台接口也调好后, 开始测试支付, 那么问题来了, 支付可是得花钱的呀, 为了解决这个问题, 支付宝官方给我们提供了一个沙箱环境的支付宝, 方便开发测试</p>
<p>简而言之就是提供了一个测试用的支付宝账号, 里面有很多钱, 可以随便花, 哈哈, 不过仅限于测试</p>
<p>这个测试账号不能直接登录我们平常用的支付宝App, 需要下载一个沙箱用的支付宝App</p>
<p> 这里提供了沙箱支付宝App下载地址</p>
<p><a href="https://sandbox.alipaydev.com/user/downloadApp.htm" target="_blank" rel="noopener">沙箱支付宝App下载</a></p>
<h3 id="沙箱测试"><a href="#沙箱测试" class="headerlink" title="沙箱测试"></a>沙箱测试</h3><p>安装完毕后登录沙箱账号, 看看你的应用能否调起支付</p>
<p>此时你会发现支付宝调不起来 ,如果返回错误码4000, 那么就是没有检测到沙箱支付宝App</p>
<p>此时 需要在支付<code>Activity</code>中开启沙箱环境, 代码如下:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onCreate</span><span class="params">(savedInstanceState: <span class="type">Bundle</span>?)</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState)</span><br><span class="line">    EnvUtils.setEnv(EnvUtils.EnvEnum.SANDBOX)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果依然无效, 那么大概率是后台签名出了问题, 后台网关需要改成沙箱环境地址</p>
<h3 id="支付宝H5支付"><a href="#支付宝H5支付" class="headerlink" title="支付宝H5支付"></a>支付宝H5支付</h3><p>当用户手机上未安装支付宝app时也需要支持支付功能的话, 可以采用H5页面支付方案, 此时需要在清单文件中声明相应<code>Activity</code>,如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--        支付宝客户端未安装时使用H5页面  --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:name</span>=<span class="string">"com.alipay.sdk.app.H5PayActivity"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:exported</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:theme</span>=<span class="string">"@android:style/Theme.Translucent.NoTitleBar"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:name</span>=<span class="string">"com.alipay.sdk.app.H5AuthActivity"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:exported</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">          <span class="attr">android:theme</span>=<span class="string">"@android:style/Theme.Translucent.NoTitleBar"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>该功能可选, 如果不需要可不添加</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>支付宝集成归纳如下:</p>
<ul>
<li>前端无需配置APPID, 只需确保<strong>应用签名</strong>正确 包名不一样也能正常调起</li>
<li>沙箱测试, 前端需要使用<code>EnvUtils</code>开启沙箱环境</li>
<li>沙箱支付宝登录使用开发后台提供的买家账号登录, 用于支付</li>
</ul>
<p>微信支付集成归纳如下:</p>
<ul>
<li><p>前端需要配置<strong>APPID和密钥</strong> 同时<strong>包名</strong>和<strong>应用签名</strong>需要正确</p>
</li>
<li><p>还需要再创建一个<code>WXEntryActivity</code>, 并在清单文件中注册</p>
<p>清单文件中可以考虑使用<code>activity-alias</code> 实现多合一注册, 示例如下</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">activity-alias</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"$&#123;applicationId&#125;.wxapi.WXPayEntryActivity"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:exported</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:targetActivity</span>=<span class="string">"WeiXinHandlerActivity"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:theme</span>=<span class="string">"@android:style/Theme.Translucent.NoTitleBar"</span> /&gt;</span>   </span><br><span class="line"><span class="tag">&lt;<span class="name">activity-alias</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:name</span>=<span class="string">"$&#123;applicationId&#125;.wxapi.WXEntryActivity"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:exported</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:targetActivity</span>=<span class="string">"WeiXinHandlerActivity"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:theme</span>=<span class="string">"@android:style/Theme.Translucent.NoTitleBar"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><p>从<code>Android11</code>开始, 涉及到一个软件可见性适配问题, 也就是说调起第三方应用时需要在清单文件中声明其对应的包名, 否则无法调起支付, 具体代码如下:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">queries</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"com.eg.android.AlipayGphone"</span> /&gt;</span> <span class="comment">&lt;!-- 支付宝 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"hk.alipay.wallet"</span> /&gt;</span> <span class="comment">&lt;!-- AlipayHK --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"com.tencent.mm"</span> /&gt;</span> <span class="comment">&lt;!-- 微信支付 --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">package</span> <span class="attr">android:name</span>=<span class="string">"com.sina.weibo"</span> /&gt;</span> <span class="comment">&lt;!-- 微博 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">queries</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">application</span></span></span><br><span class="line"><span class="tag">  <span class="attr">...</span></span></span><br></pre></td></tr></table></figure>

<p>《<a href="https://open.weixin.qq.com/cgi-bin/announce?action=getannouncement&key=11600155960jI9EY&version=&lang=&token=" target="_blank" rel="noopener">Android 11 系统策略更新</a>》</p>
<h3 id="附加"><a href="#附加" class="headerlink" title="附加"></a>附加</h3><p><a href="https://opendocs.alipay.com/open/54/104509" target="_blank" rel="noopener">支付宝支付客户端 DEMO&amp;SDK下载</a></p>
<p><a href="https://opendocs.alipay.com/open/204/105296" target="_blank" rel="noopener">支付宝支付集成文档</a></p>
<p><a href="https://developers.weixin.qq.com/doc/oplatform/Mobile_App/Access_Guide/Android.html" target="_blank" rel="noopener">微信支付安卓接入指南</a></p>
<p><strong>本文为作者原创转载时请注明出处 谢谢</strong></p>
<p><img src="https://gitee.com/songjianzaina/SavePicGoPic/raw/master/img/20191119095516.png" alt></p>
<p><em><a href="https://code.newban.cn/">乱码三千 – 点滴积累 ,欢迎来到乱码三千技术博客站</a></em></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="../13/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../13/">13</a><span class="page-number current">14</span><a class="page-number" href="../15/">15</a><span class="space">&hellip;</span><a class="page-number" href="../47/">47</a><a class="extend next" rel="next" href="../15/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">乱码三千</p>
              <p class="site-description motion-element" itemprop="description">android程序员一枚,擅长java,kotlin,python,金融投资,欢迎交流~</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="https://code.newban.cn/archives/">
              
                  <span class="site-state-item-count">469</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">138</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="../../atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">乱码三千</span>
  <div>
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">本站总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  </div>
  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




  <script type="text/javascript" async src="js/src/mermaid.min.js"></script>
  <script>
  if (window.mermaid) {
        var mermaid_config = {
            startOnLoad: true,
            theme: 'default',
            flowchart:{
                useMaxWidth: false,
                htmlLabels: true
            }                
        }
        mermaid.initialize(mermaid_config);
  }
  </script>
  
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="../../lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="../../lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="../../lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="../../js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="../../js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="../../js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  







<!-- LOCAL: You can save these files to your site and update links -->
    
        
        <link rel="stylesheet" href="https://aimingoo.github.io/gitmint/style/default.css">
        <script src="https://aimingoo.github.io/gitmint/dist/gitmint.browser.js"></script>
    
<!-- END LOCAL -->

    
      <style>
        a.gitment-editor-footer-tip { display: none; }
        .gitment-container.gitment-footer-container { display: none; }
      </style>
    

    







  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
